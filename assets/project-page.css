/* ============================================================
   TMS STEM — Shared Project Page Extensions (v1)
   Purpose: one place for future global tweaks across ALL project pages.
   Safe: should not override existing styles unless you add rules here.
============================================================ */

/* Example (disabled):
:root{ --H_SECTION: 22px; }
*/


/* ============================================================
   OVERVIEW SCROLLER (LOCKED)
   Requirement: tiles ~16:9, height 220px, rounded corners,
   label pill INSIDE thumbnail image.
   Scope: Only the Overview scroller (#thumbRow).
============================================================ */
#thumbRow{
  display:flex;
  gap:12px;
  overflow-x:auto;
  padding:6px 4px 10px;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling:touch;
}
#thumbRow::-webkit-scrollbar{ height:10px; }
#thumbRow::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.14); border-radius:999px; }

#thumbRow .ovTile{
  position:relative;
  flex:0 0 auto;
  height:220px;
  width:min(392px, 82vw); /* ~16:9 at 220px tall */
  border-radius:18px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.06);
  box-shadow:0 10px 28px rgba(0,0,0,.35);
  scroll-snap-align:start;
  transform:translateZ(0);
}
#thumbRow .ovTile:hover{
  border-color:rgba(79,134,198,.55);
  transform:translateY(-1px);
}
#thumbRow .ovTile img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  filter:saturate(1.05) contrast(1.05);
}

/* subtle dark gradient so the pill always reads */
#thumbRow .ovTile::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(180deg, transparent 58%, rgba(0,0,0,.55));
  pointer-events:none;
}

/* label pill INSIDE the thumbnail */
#thumbRow .ovTile .gimPill{
  position:absolute;
  left:12px;
  bottom:12px;
  z-index:2;
  max-width:calc(100% - 24px);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  pointer-events:none;

  border:1px solid rgba(255,255,255,.18);
  background:rgba(30,30,30,.78);   /* dark pill */
  color:rgba(255,255,255,.96);     /* white text */
  font-weight:1000;
  border-radius:999px;
  padding:8px 12px;
  backdrop-filter: blur(6px);
  box-shadow:0 10px 22px rgba(0,0,0,.35);
  font-size:13px;
  line-height:1;
}

#thumbRow .ovTile:focus-visible{
  outline:3px solid rgba(79,134,198,.8);
  outline-offset:6px;
}


/* === Project title scale tweak (to align left/right card bottoms) === */
.daTop .projTitle{ font-size:64px; line-height:1.02; }
@media (max-width: 720px){ .daTop .projTitle{ font-size:46px; } }

/* Place Ask card under Gimkit card (right column) on desktop */
@media (min-width: 981px){
  .daTop .heroGrid > .askGeppettoCard{ grid-column:2; }
}

/* ============================================================
   ASK GEPPETTO — Graphic button + layout stability
   ============================================================ */

/* The JS wraps Gimkit + Ask into a vertical stack. Ensure it can shrink.
   Without min-width:0, the large button image can force the whole right
   column wider after JS runs ("flash" symptom you described). */
.gimkitAskStack{ 
  display:flex;
  flex-direction:column;
  height:100%;
  min-width:0;
}

/* Grid items must be allowed to shrink below their content width */
.heroGrid > *,
.projectTopGrid > *,
.topTwoCol > *{
  min-width:0;
}

/* Make sure grid items can shrink inside CSS Grid/Flex contexts */
.daTop .heroGrid > *{ min-width:0; }

/* Ask Geppetto card */
.askGeppettoCard{
  margin-top:12px;
  border-radius:18px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 10px 30px rgba(0,0,0,.35);
  overflow:hidden;
}

.askGeppettoBtn{
  display:block;
  width:100%;
  padding:12px;
  background:transparent;
  border:0;
  cursor:pointer;
}

/* CRITICAL: prevent the image from widening the column */
.askGeppettoImg{
  display:block;
  width:100%;
  max-width:100%;
  height:auto;
}

/* Tighten spacing below Gimkit to reduce the "dead zone" */
.gimkitAskStack .gimkitCard{ margin-bottom:10px; }


/* =========================================================
   Ask Geppetto + Hero layout (LOCKED STABLE WIDTH + ALIGN)
   - Ensure Overview is the wider column
   - Prevent image button from forcing column expansion
   - Keep bottoms aligned without wasting space under scroller
   ========================================================= */

.daTop .sectionGrid{
  grid-template-columns: minmax(0, 1.35fr) minmax(0, 0.65fr) !important;
  align-items: stretch !important;
}

/* Allow grid items to shrink (critical for Cloudflare + big images) */
.daTop .sectionGrid > *{ min-width:0 !important; }

/* Title: slightly larger/taller so left card can visually balance the right stack */
.daTop .projectTitle{
  font-size: clamp(34px, 4.2vw, 54px) !important;
  line-height: 1.05 !important;
  margin-bottom: 10px !important;
}

/* Make the Overview card a flex column and pin the scroller to the bottom */
.daTop .heroCard .heroInner,
.daTop .overviewCard .overviewInner{
  display:flex !important;
  flex-direction:column !important;
  height:100% !important;
  min-height:0 !important;
}

.daTop .overviewScroller{
  margin-top:auto !important;   /* pushes scroller down */
  margin-bottom:0 !important;
}

/* Stack (Gimkit + Ask Geppetto) */
.gimkitAskStack{
  display:flex;
  flex-direction:column;
  width:100%;
  max-width:100%;
  min-width:0;
  gap:14px;
}

/* Make sure the image button NEVER expands the column */
.askGeppettoLink{
  display:block;
  width:100%;
  max-width:100%;
}

.askGeppettoLink img{
  display:block;
  width:100%;
  max-width:100%;
  height:auto;
}

/* Slightly reduce extra padding inside the Gimkit card so there isn't a dead zone */
.gimkitAskStack .gimkitCard{
  padding-bottom: 10px !important;
}
