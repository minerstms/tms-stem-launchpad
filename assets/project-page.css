/* ============================================================
   TMS STEM — Shared Project Page Extensions (v1)
   Purpose: one place for future global tweaks across ALL project pages.
   Safe: should not override existing styles unless you add rules here.
============================================================ */

/* Example (disabled):
:root{ --H_SECTION: 22px; }
*/


/* ============================================================
   OVERVIEW SCROLLER (LOCKED)
   Requirement: tiles ~16:9, height 220px, rounded corners,
   label pill INSIDE thumbnail image.
   Scope: Only the Overview scroller (#thumbRow).
============================================================ */
#thumbRow{
  min-height: calc(var(--overview-thumb-height) + 24px) !important;
  display:flex;
  gap:12px;
  overflow-x:auto;
  padding:6px 4px 10px;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling:touch;
}
#thumbRow::-webkit-scrollbar{ height:10px; }
#thumbRow::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.14); border-radius:999px; }

#thumbRow .ovTile{
  position:relative;
  flex:0 0 auto;
  height:var(--overview-thumb-height) !important;
  width:min(calc(var(--overview-thumb-height) * 16 / 9), 82vw);
  max-width: 420px; /* cap desktop width */
  border-radius:var(--overview-thumb-radius);
  overflow:hidden;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.06);
  box-shadow:0 10px 28px rgba(0,0,0,.35);
  scroll-snap-align:start;
  transform:translateZ(0);
}
#thumbRow .ovTile:hover{
  border-color:rgba(79,134,198,.55);
  transform:translateY(-1px);
}
#thumbRow .ovTile img{
  border-radius: inherit;
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  filter:saturate(1.05) contrast(1.05);
}

/* subtle dark gradient so the pill always reads */
#thumbRow .ovTile::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(180deg, transparent 58%, rgba(0,0,0,.55));
  pointer-events:none;
}

/* label pill INSIDE the thumbnail */
#thumbRow .ovTile .gimPill{
  position:absolute;
  left:12px;
  bottom:12px;
  z-index:2;
  max-width:calc(100% - 24px);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  pointer-events:none;

  border:1px solid rgba(255,255,255,.18);
  background:rgba(30,30,30,.78);   /* dark pill */
  color:rgba(255,255,255,.96);     /* white text */
  font-weight:1000;
  border-radius:999px;
  padding:8px 12px;
  backdrop-filter: blur(6px);
  box-shadow:0 10px 22px rgba(0,0,0,.35);
  font-size:13px;
  line-height:1;
}

#thumbRow .ovTile:focus-visible{
  outline:3px solid rgba(79,134,198,.8);
  outline-offset:6px;
}


/* === Project title scale tweak (to align left/right card bottoms) === */
.daTop .projTitle{ font-size:64px; line-height:1.02; }
@media (max-width: 720px){ .daTop .projTitle{ font-size:46px; } }

/* Place Ask card under Gimkit card (right column) on desktop */
@media (min-width: 981px){
  .daTop .heroGrid > .askGeppettoCard{ grid-column:2; }
}

/* ============================================================
   ASK GEPPETTO — Graphic button + layout stability
   ============================================================ */

/* The JS wraps Gimkit + Ask into a vertical stack. Ensure it can shrink.
   Without min-width:0, the large button image can force the whole right
   column wider after JS runs ("flash" symptom you described). */
.gimkitStack{ 
  display:flex;
  flex-direction:column;
  height:100%;
  min-width:0;
}

/* Grid items must be allowed to shrink below their content width */
.heroGrid > *,
.projectTopGrid > *,
.topTwoCol > *{
  min-width:0;
}

/* Make sure grid items can shrink inside CSS Grid/Flex contexts */
.daTop .heroGrid > *{ min-width:0; }

/* Ask Geppetto card */
.askGeppettoCard{
  margin-top:12px;
  border-radius:18px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 10px 30px rgba(0,0,0,.35);
  overflow:hidden;
}

.askGeppettoBtn{
  display:block;
  width:100%;
  padding:12px;
  background:transparent;
  border:0;
  cursor:pointer;
}

/* CRITICAL: prevent the image from widening the column */
.askGeppettoImg{
  display:block;
  width:100%;
  max-width:100%;
  height:auto;
}

/* Tighten spacing below Gimkit to reduce the "dead zone" */
.gimkitStack .gimkitCard{ margin-bottom:10px; }


/* =========================================================
   Ask Geppetto + Hero layout (LOCKED STABLE WIDTH + ALIGN)
   - Ensure Overview is the wider column
   - Prevent image button from forcing column expansion
   - Keep bottoms aligned without wasting space under scroller
   ========================================================= */

.daTop .sectionGrid{
  display:grid;
  grid-template-columns:minmax(0,1.35fr) minmax(0,.65fr) !important;
  gap:14px !important;
  align-items:stretch;

}

/* Allow grid items to shrink (critical for Cloudflare + big images) */
.daTop .sectionGrid > *{ min-width:0 !important; }

/* Title: slightly larger/taller so left card can visually balance the right stack */
.daTop .projectTitle{
  font-size: clamp(34px, 4.2vw, 54px) !important;
  line-height: 1.05 !important;
  margin-bottom: 10px !important;
}

/* Make the Overview card a flex column and pin the scroller to the bottom */
.daTop .heroCard .heroInner,
.daTop .overviewCard .overviewInner{
  display:flex !important;
  flex-direction:column !important;
  height:100% !important;
  min-height:0 !important;
}

.daTop .overviewScroller{
  margin-top:auto !important;   /* pushes scroller down */
  margin-bottom:0 !important;
}

/* Stack (Gimkit + Ask Geppetto) */
.gimkitStack{
  display:flex;
  flex-direction:column;
  width:100%;
  max-width:100%;
  min-width:0;
  gap:14px;
}

/* Make sure the image button NEVER expands the column */
.askGeppettoLink{
  display:block;
  width:100%;
  max-width:100%;
}

.askGeppettoLink img{
  display:block;
  width:100%;
  max-width:100%;
  height:auto;
}

/* Slightly reduce extra padding inside the Gimkit card so there isn't a dead zone */
.gimkitStack .gimkitCard{
  padding-bottom: 10px !important;
}


.daTop .heroGrid{
  display:grid;
  grid-template-columns:minmax(0,1.25fr) minmax(0,.75fr) !important;
  gap:14px !important;
  align-items:stretch;

}


/* ====== Ask Geppetto + Gimkit column sizing/spacing (LOCKED) ====== */
.gimkitStack{
  display:flex;
  flex-direction:column;
  gap:14px;
  height:100%;
  min-width:0;
}
.gimkitCard, .askGeppettoCard, .gimkitStack, .overviewCard{
  min-width:0;
  max-width:100%;
}

.askGeppettoCard{
  flex:1 1 auto; /* fill leftover height so we don't get dead space */
  display:flex;
  flex-direction:column;
}

.askGeppettoInner{
  height:100%;
  display:flex;
  align-items:stretch;
  justify-content:stretch;
  padding:10px;
}

.askGeppettoBtn{
  width:100%;
  height:100%;
  background:transparent;
  border:0;
  padding:0;
  cursor:pointer;
}

.askGeppettoImg{
  width:100%;
  height:100%;
  object-fit:contain;
  filter:drop-shadow(0 10px 24px rgba(0,0,0,.55));
}



/* =========================================================
   TOP ROW — Equal-height columns + scroller pins to bottom
   Goal: Right stack (Gimkit + Ask) defines height; left hero stretches.
   Safe: container-only sizing; does NOT alter tile sizing/scroll logic.
   ========================================================= */

.heroGrid{
  align-items:stretch;
}

/* Right column wrapper created by JS (Gimkit + Ask) */
.gimkitStack{
  display:flex;
  flex-direction:column;
  gap:12px;
  height:100%;
  min-width:0;
}

/* Left column: make the whole hero card a flex column */
.heroCard{
  height:100%;
  min-height:0;
}
.heroCard .heroInner{
  display:flex;
  flex-direction:column;
  height:100%;
  min-height:0;
}

/* Let the Overview card absorb leftover height */
.heroCard .overviewCard{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  min-height:0;
}

/* Push the scroller area to the bottom inside the Overview card */
.heroCard .overviewCard .thumbRow{
  margin-top:auto;
}

/* Ask card should stay "natural" height (NOT stretched) */
.gimkitStack .askGeppettoCard{
  flex:0 0 auto;
}



/* ===================== Overview scroller (CLAMP FIX) ===================== */

:root{
  /* Desktop-friendly, responsive, safe */
  --overview-thumb-height: clamp(120px, 18vh, 180px);
  --overview-thumb-radius: 16px;
}

/* The horizontal scroller row */
.overviewCard .thumbRow{
  min-height: calc(var(--overview-thumb-height) + 16px);
  padding-bottom: 6px;
}

/* Individual overview tiles */
.overviewCard .thumbTile{
  height: var(--overview-thumb-height);
  border-radius: var(--overview-thumb-radius);
  overflow: hidden;
}

/* Thumbnail images */
.overviewCard .thumbTile img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: var(--overview-thumb-radius);
}
